{% extends "index.html" %}
{% load i18n %}

{% load static %}
<!-- when you want to use images, use this jinja format to create a variable -->
{% static "images" as baseUrl %}
{% block carousel1_content %}
    <!-- owl carousel -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
    <link rel="stylesheet" type="text/css" href="{% static 'plugins/OwlCarousel2-2.2.1/owl.carousel.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'plugins/OwlCarousel2-2.2.1/owl.theme.default.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'plugins/OwlCarousel2-2.2.1/animate.css' %}">	
    {% get_current_language as LANGUAGE_CODE %}
    <div class="card">
    <!-- CAUTION if you delete an image in the admin page or clear the default "0" value and then do not upload an image, a valueerror will occur 
        also, if you only upload 1 or 2 images, then the carousel will duplicate the images to have three images displayed on the default page size
        image file names cannot have "0" in them as they are the default flag used to skip fields
    -->
     <!-- getting image data from carousel.html -->
        <div class="container p-2">
            {% if carouselObjects %}
                {% if "0" in carouselObjects.name  %}
                    <!-- skip it -->
                {% else %}
                    {% if LANGUAGE_CODE == 'ja' %}
                    <div class="card-title p-3">
                        <h4>{{carouselObjects.name}} </h4>
                    </div>
                    {% else %}
                    <div class="card-title p-3">
                        <h4>{{carouselObjects.english_name}} </h4>
                    </div>
                    {% endif %}
                {% endif %}
                <div class="painting_description gallery-item">
                    {% if LANGUAGE_CODE == 'ja' %}
                    <!-- get object data from views.py -->
                    <p id="long_desc">{{carouselObjects.long_description}} </p>
                    {% else %}
                    <p id="long_desc">{{carouselObjects.english_long_description}} </p>
                    {% endif %}
                </div>
            {% endif %}
            <div class="text-end">
                {% if carouselObjects %}
                    {% if "0" in carouselObjects.price %}
                    <!-- skip it -->
                    {% else %}
                        <div class="card-text">
                            {% if LANGUAGE_CODE == 'ja' %}
                            <h4>¥{{carouselObjects.price}} </h4>
                            {% else %}
                            <h4>${{carouselObjects.dollar_price}} </h4>
                            {% endif %}
                        </div>
                    {% endif %}
                    {% get_current_language as LANGUAGE_CODE %}
                    <a class="btn btn-sm btn-outline-info text-dark" href="/{{LANGUAGE_CODE}}/checkout/{{carouselObjects.id}}">{% translate '購入する' %}</a>
                {% endif %}
            </div>
        </div>

        <!-- CAROUSEL START -->
        {% if carouselObjects %}
        <div class="owl-carousel owl-theme owl-loaded" id="myCarousel" style=" margin: 0 auto !important;">
            <!-- image -->
            {% if "0" in carouselObjects.painting_left.url %}
            <!-- skip it -->
            {% else %}
            <div class="item">
                <div class="slide-content">
                    <img src="{{carouselObjects.painting_left.url}}" />
                </div>
            </div>
            {% endif %}
            {% if "0" in carouselObjects.painting.url %}
            <!-- skip it -->
            {% else %}
            <div class="item">
                <div class="slide-content">
                    <img src="{{carouselObjects.painting.url}}" />
                </div>
            </div>
            {% endif %}
            {% if "0" in carouselObjects.painting_right.url %}
            <!-- skip it -->
            {% else %}
            <div class="item">
                <div class="slide-content">
                    <img src="{{carouselObjects.painting_right.url}}" />
                </div>
            </div>
            {% endif %}
            {% if "0" in carouselObjects.painting_top.url %}
            <!-- skip it -->
            {% else %}
            <div class="item">
                <div class="slide-content">
                    <img src="{{carouselObjects.painting_top.url}}" />
                </div>
            </div>
            {% endif %}
            {% if "0" in carouselObjects.painting_bottom.url %}
            <!-- skip it -->
            {% else %}
            <div class="item">
                <div class="slide-content">
                    <img src="{{carouselObjects.painting_bottom.url}}" />
                </div>
            </div>
            {% endif %}
            {% if "0" in carouselObjects.painting_back.url %}
            <!-- skip it -->
            {% else %}
            <div class="item">
                <div class="slide-content">
                    <img src="{{carouselObjects.painting_back.url}}" />
                </div>
            </div>
            {% endif %}
        </div>
        {% endif %}
    </div>
        <!-- CAROUSEL END -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <!-- owl carousel -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
        {% block carousel_js %} 
            <script>
            // OWL CAROUSEL JS
            //function createCarousel() {
                // console.log("Carousel js called")
                    $(".owl-carousel").owlCarousel({
                        items: 3,
                        loop:true,
                        nav:true,
                        dots: false,
                        autoplay: false,
                        autoplayTimeout: 5000,
                        smartSpeed: 500,
                        autoplayHoverPause: false,
                        margin: 20,
                        touchDrag: true,
                        mouseDrag: false,
                        // edit how many images will be shown on page size
                        responsive: {
                            0:{
                                items:1
                            },
                            600:{
                                items:1
                            },
                            1000:{
                                items:3
                            }
                        },
                        navText : ["<i class='fa fa-chevron-left'></i>","<i class='fa fa-chevron-right'></i>"]
                    });
            // END OWL CAROUSEL
            </script>
            <script src="{% static 'plugins/OwlCarousel2-2.2.1/owl.carousel.js' %}"></script>
        {% endblock %}
{% endblock %}